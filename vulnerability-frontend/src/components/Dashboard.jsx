import React from 'react';
import { Grid, Box, Typography } from '@mui/material';
import VulnerabilityCard from './VulnerabilityCard';
import RepositoryCard from './RepositoryCard'; // Import the new card
import StatusGroupCard from './StatusGroupCard';

function Dashboard({ groupedData, groupBy, onDataRefresh }) {
  if (!groupedData || groupedData.length === 0) {
    return (
        <Box textAlign="center" sx={{ mt: 8 }}>
            <Typography variant="h6" color="text.secondary">
                No results found for the current filters.
            </Typography>
        </Box>
    );
  }

  return (
    <Grid container spacing={3}>
      {groupedData.map(({ groupInfo, instances }) => (
        <Grid item xs={12} key={groupInfo.id}>
          {groupBy === 'vulnerability' ? (
            <VulnerabilityCard
              vulnerability={groupInfo}
              instances={instances}
              onDataRefresh={onDataRefresh}
            />
          ) : groupBy === 'repository' ? (
            <RepositoryCard
              repository={groupInfo}
              instances={instances}
              onDataRefresh={onDataRefresh}
            />
          ) : (
            <StatusGroupCard status={groupInfo.name} instances={instances} />
          )}
        </Grid>
      ))}
    </Grid>
  );
}

export default Dashboard;