import React from 'react';
import { Accordion, AccordionSummary, AccordionDetails, Typography, Box, Chip, List, ListItem, ListItemText } from '@mui/material';
import ExpandMoreIcon from '@mui/icons-material/ExpandMore';

function StatusGroupCard({ status, instances }) {
  const color = status === 'OPEN' ? 'error' : 'success';

  return (
    <Accordion sx={{ bgcolor: 'background.paper' }} defaultExpanded>
      <AccordionSummary expandIcon={<ExpandMoreIcon />}>
        <Box display="flex" alignItems="center" width="100%" flexWrap="wrap" gap={1}>
          <Chip label={status} color={color} />
          <Typography sx={{ ml: 1, flex: 1 }}>
            {instances.length} Vulnerabilities
          </Typography>
        </Box>
      </AccordionSummary>
      <AccordionDetails sx={{ borderTop: '1px solid rgba(255, 255, 255, 0.12)' }}>
        <List dense>
          {instances.map(instance => (
            <ListItem key={instance.id}>
              <ListItemText 
                primary={instance.vulnerability.description}
                secondary={instance.repository.fullName}
              />
            </ListItem>
          ))}
        </List>
      </AccordionDetails>
    </Accordion>
  );
}

export default StatusGroupCard;